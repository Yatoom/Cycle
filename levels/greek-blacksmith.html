<!-- HTML -->
<a id="marketplace" class="south click"/>
<a id="box-1" class="click inspect"/>
<a id="box-2" class="click inspect"/>
<a id="box-3" class="click inspect"/>
<a id="box-4" class="click inspect"/>
<a id="box-5" class="click inspect"/>
<a id="box-6" class="click inspect"/>
<a id="box-7" class="click inspect"/>
<a id="box-8" class="click inspect"/>
<a id="box-9" class="click inspect"/>
<a id="box-10" class="click inspect"/>
<a id="box-11" class="click inspect"/>
<a id="swords-1" class="click inspect"/>
<a id="swords-2" class="click inspect"/>
<a id="swords-3" class="click inspect"/>
<a id="anvil-1" class="click inspect"/>
<a id="anvil-2" class="click inspect"/>
<a id="window" class="click inspect"/>
<a id="fire" class="click inspect"/>
<a id="npc" class="click talk"/>
<img src="/levels/img/hammer.png" id="hammer" class="click interact"/>
<img src="levels/img/Shields/shield-1.png" id="shield-1" class="click inspect"/>
<img src="levels/img/Shields/shield-2.png" id="shield-2" class="click inspect"/>
<img src="levels/img/Shields/shield-3.png" id="shield-3" class="click inspect"/>
<img src="levels/img/Shields/shield-4.png" id="shield-4" class="click inspect"/>
<img src="levels/img/Shields/shield-5.png" id="shield-5" class="click inspect"/>

<!-- CSS -->
<style>
  .game {
    background: url(levels/img/greek-blacksmith.png) no-repeat;
  }

  .movedLeft {
    transform: translateX(-100px);
    -webkit-transform: translateX(-100px);
  }

  #marketplace {
    top: 86%;
    left: 33%;
    height: 14%;
    width: 35%;
  }

  #shield-1 {
    top: 1%;
    left: 70%;
    height: 18%;
    width: 10%;
  }

  #shield-2 {
    top: 8%;
    left: 78%;
    height: 18%;
    width: 10%;
  }

  #shield-3 {
    top: 8%;
    left: 87%;
    height: 18%;
    width: 10%;
    transition: all 2s;
  }

  #shield-4 {
    top: 18%;
    left: 81%;
    height: 18%;
    width: 10%;    
  }

  #shield-5 {
    top: 19%;
    left: 89%;
    height: 18%;
    width: 10%;
  }

  #box-1 {
    top: 37%;
    left: 5%;
    height: 11%;
    width: 7%;
  }

  #box-2 {
    top: 47%;
    left: 1%;
    height: 11%;
    width: 7%;
  }

  #box-3 {
    top: 47%;
    left: 8%;
    height: 11%;
    width: 7%;
  }

  #box-4 {
    top: 56%;
    left: 9%;
    height: 15%;
    width: 8%;
  }

  #box-5 {
    top: 69%;
    left: 4%;
    height: 15%;
    width: 8%;
  }

  #box-6 {
    top: 69%;
    left: 12%;
    height: 15%;
    width: 8%;
  }

  #box-7 {
    top: 64%;
    left: 18%;
    height: 15%;
    width: 8%;
    z-index: 1;
  }

  #box-8 {
    top: 77%;
    left: 12%;
    height: 15%;
    width: 8%;
  }

  #box-9 {
    top: 77%;
    left: 21%;
    height: 15%;
    width: 8%;
  }

  #box-10 {
    top: 39%;
    left: 81%;
    height: 18%;
    width: 9%;
  }

  #box-11 {
    top: 39%;
    left: 89%;
    height: 18%;
    width: 10%;
  }

  #swords-1 {
    top: 29%;
    left: 29%;
    height: 23%;
    width: 8%;
  }

  #swords-2 {
    top: 70%;
    left: 87%;
    height: 23%;
    width: 8%;
    z-index: 1;
  }

  #swords-3 {
    top: 1%;
    left: 40%;
    height: 23%;
    width: 16%;
  }

  #anvil-1 {
    top: 50%;
    left: 18%;
    height: 24%;
    width: 14%;
  }

  #anvil-2 {
    top: 60%;
    left: 78%;
    height: 24%;
    width: 14%;
  }

  #fire {
    top: 31%;
    left: 62%;
    height: 19%;
    width: 12%;
  }

  #npc {
    top: 24%;
    left: 51%;
    height: 35%;
    width: 12%;
  }

  #hammer {
    top: 10%;
    left: 90%;
    height: 9%;
    width: 5%;
  }

  #window {
    top: 7%;
    left: 13%;
    height: 32%;
    width: 13%;
  }
</style>
<!-- Javascript -->
<script>


secondaryPlay("greekMarket");

// if(typeof marketblack == 'undefined') {  
//   var marketblack = 1;
// }else if(marketblack = 0) {

//   marketblack = 1;
// }else{

//    marketblack = 1;
// }

// //if the background sound does not exist yet, make it
// if(typeof greekSound == 'undefined') {
//     var greekSound = new Audio("levels/Sounds/backgr_GreekMarketandBlacksmith.ogg");
//   }

// if(typeof victory == 'undefined') {
//   var victory = new Audio("levels/Sounds/achiObjectfound.ogg") ;
// }

// //background music is allowed when:
// // no other music is playing ((can only be victory that overlaps))

// //check if victoryt is playing
// // if not - play bakcground

// // if it is playing - wait till it ends

// // then play your music IF you are still in the same area where it is allowed -> marketblack == 1



//  function startMusic(){

// //IF VICTORY IS PLAYING

// if(victory.currentTime > 0){   
//   victory.addEventListener('ended',function() { // WAIT TILL IT ENDS
    
//     victory.currentTime = 0;
//     //VICTORY ENDS - CHECK IF YOU ARE IN THE PROPER PLACE 
//     if(marketblack == 1){ 
//     greekSound.play();  //play music if you are - if not; let the new frame deal with it.
//   }
//   //WRONG PLACE, DONT PLAY
//   }, false);


//   //VICTORY IS NOT PLAYING, CHECK IF YOU ARE IN THE PROPER PLACE
// }else if(marketblack == 1){

//   greekSound.play();  //you are correct
// }else{


// }
// } //close function


// //event listener outside of Music Function to check stuff after initial run
// victory.addEventListener('ended',function(){

// greekSound.play();

// },false);

// //music loop
// greekSound.addEventListener('ended', function() {
//   greekSound.currentTime = 0;
//   greekSound.play();
// }, false);


// //call the music function
//   startMusic();


$(".draggable").draggable();

$("#marketplace").click(function(){
  goToLevel("greek-marketplace");
});

$("#box-1").click(function(){
  log("This is a box of random tools.")
});
$("#box-2").click(function(){
  log("The box is empty.")
});
$("#box-3").click(function(){
  log("There are some helmets in here.")
});
$("#box-4").click(function(){
  log("It contains some metal bars.")
});
$("#box-5").click(function(){
  log("I see a few daggers.")
});
$("#box-6").click(function(){
  log("It's a box of coal.")
});
$("#box-7").click(function(){
  log("I think this is a personal box. Better not look into it.")
});
$("#box-8").click(function(){
  log("I think this is a box of pok√©balls.")
});
$("#box-9").click(function(){
  log("There are apples in here. Of course, working hard gets you hungry.")
});
$("#box-10").click(function(){
  log("It's a box with other boxes inside.")
});
$("#box-11").click(function(){
  log("It's a box with dragon eggs.")
});

$("#swords-1").click(function(){
  log("Freshly made swords.")
});
$("#swords-2").click(function(){
  log("Legendary swords.")
});
$("#swords-3").click(function(){
  log("Some regular swords.")
})

$("#anvil-1").click(function(){
  log("A heavy anvil.")
});
$("#anvil-2").click(function(){
  log("A legendary sword in the making.")
});

$("#fire").click(function(){
  log("That's hot!")
});

$("#window").click(function(){
  log("A window with a great view on a tree... Do I see some apples over there?")
});


$("#npc").click(function(){
  if (getConfig(Config.TRADEDHAMMERWITHTHOR) == 1 || hasItem(Item.HAMMER)){
    speak("Blacksmith Christoforos", "I never expected my hammer to be behind that shield.");
  } else {
    speak("Blacksmith Christoforos", "I lost my hammer again, I looked everywhere! If you can find it, you can have it. It was getting old anyway. I'm buying a new one on the market today.");
  }
});

if (getConfig(Config.TRADEDHAMMERWITHTHOR) == 1 || hasItem(Item.HAMMER)){
  $("#hammer").remove();
  $("#shield-3").click(function(){
    log("That's a nice shield.")
  });
} else {
  $("#shield-3").click(function(){
    log("Hey! There is something behind this shield!")
    $(this).addClass("movedLeft").unbind("click").click(function(){log("That's a nice shield.")});
  });
}

$("#shield-1").click(function(){
  log("A shield with the colors of the 10th legion.")
});

$("#shield-2").click(function(){
  log("A shield with the colors of the 7th legion.")
});

$("#shield-4").click(function(){
  log("A legendary shield.")
});

$("#shield-5").click(function(){
  log("A shield crafted to defend against dragon breath.")
});

$("#hammer").click(function(){

stop("puzzleSolved"); //if it was playing don't play it anymore
  primaryPlay("objectFound");   // play victory

  
  addItem(Item.HAMMER);
  $("#hammer").remove();
  $("#shield-3").removeClass("movedLeft");
  log("You found a hammer!");
});



</script>